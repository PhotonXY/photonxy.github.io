:root{
  --bg:#f7f7f7;
  --card:#ffffff;
  --text:#222;
  --muted:#666;
  --primary:#e06a2c;
  --primary-700:#cc5f26;
  --border:#e3e3e3;
  --accent: var(--primary);
  /* Button variables (light) */
  --btn-secondary-bg:#f3f3f3;
  --btn-secondary-text:#111;
  --btn-secondary-border:#d9d9d9;
}

*{box-sizing:border-box}
html,body{margin:0;padding:0}
body{
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Arial,sans-serif;
  background:var(--bg); color:var(--text); line-height:1.4;
}

.header{max-width:1100px;margin:24px auto 8px;padding:0 16px;text-align:center;position:relative}
.header-image{width:110px;height:110px;object-fit:cover;border-radius:999px;box-shadow:0 6px 22px rgba(0,0,0,.08);margin-bottom:8px}
.header h1{margin:.25rem 0 .35rem;font-weight:700}
.header p{color:var(--muted);margin:.25rem 0 .5rem}

section{max-width:1100px;margin:12px auto;padding:16px}

.order-info{background:var(--card);border:1px solid var(--border);border-radius:12px;display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}

.admin{background:var(--card);border:1px solid var(--border);border-radius:12px}
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.field-group{display:flex;flex-direction:column;gap:6px;margin-bottom:8px}
.validation-hint{color:#b94a48;font-size:.9rem;margin:4px 0 8px}
.field-group input, .field-group select, .field-group textarea{width:100%}
.field-group input[type="checkbox"]{width:auto}
.time-inline{display:flex;gap:8px;align-items:center}
.time-inline select{min-width:150px;display:none}

/* Time popover (like calendar) */
.time-popover{position:absolute;z-index:2000;background:var(--card);border:1px solid var(--border);box-shadow:0 10px 30px rgba(0,0,0,.18);border-radius:12px;padding:8px;min-width:180px;max-height:260px;overflow:auto}
.time-popover__grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:6px}
.time-popover__item{padding:8px 10px;border:1px solid var(--border);border-radius:10px;background:#fff;cursor:pointer;text-align:center}
.time-popover__item:hover{background:#f3f3f3}
:root[data-theme="dark"] .time-popover__item{background:#101010;color:var(--text);border-color:var(--border)}
:root[data-theme="dark"] .time-popover__item:hover{background:#161616}
.field-row{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0}
.field-group--full{grid-column:1 / -1}
.subheading{margin:8px 0 4px;font-size:1rem}

/* Pixabay search UI */
.pixabay-toolbar{display:flex;gap:8px;align-items:center}
.pixabay-toolbar input{flex:1}
.pixabay-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:8px}
.pixabay-item{position:relative;cursor:pointer;border:2px solid transparent;border-radius:10px;overflow:hidden;background:#fff}
.pixabay-item img{display:block;width:100%;height:100%;object-fit:cover}
.pixabay-item:hover{border-color:var(--border)}
.pixabay-item__credit{position:absolute;left:6px;bottom:6px;background:rgba(0,0,0,.5);color:#fff;font-size:.75rem;padding:2px 6px;border-radius:6px}

label{font-weight:600}
input,select,textarea{
  padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:#fff;
}
/* Validierung */
.field-invalid{ border-color:#b94a48 !important }
:root[data-theme="dark"] .field-invalid{ border-color:#a8423f !important }
/* Neutrale Checkbox-Farbe (vermeidet blau) */
body:not([data-theme="dark"]) input[type="checkbox"]{ accent-color:#666 }
:root[data-theme="dark"] input[type="checkbox"]{ accent-color:#b3b3b3 }
/* Light mode: stärkere Lesbarkeit in Feldern */
body:not([data-theme="dark"]) input,
body:not([data-theme="dark"]) select,
body:not([data-theme="dark"]) textarea{
  background:#fff;
  color:#111;
  border-color:#cfcfcf;
}

.btn{border:none;padding:10px 14px;border-radius:12px;cursor:pointer;font-weight:600}
.btn-icon{padding:0;width:36px;height:36px;display:inline-flex;align-items:center;justify-content:center}
.qr-btn{width:48px;height:48px}
.qr-btn svg{width:32px;height:32px;display:block}
.btn--orange{background:var(--primary);color:#fff}
.btn--orange:hover{background:var(--primary-700)}
.btn--half{width:50%}
@media (max-width: 520px){ .btn--half{width:100%} }
/* Drittelbreite-Button (z. B. Settings) */
.btn--third{width:33.333%;flex:0 0 33.333%;max-width:33.333%}
@media (max-width: 520px){ .btn--third{width:100%;flex-basis:100%;max-width:100%} }
.btn-with-icon{display:inline-flex;align-items:center;gap:8px}
.btn-with-icon svg{width:16px;height:16px}
.btn--primary{background:#333;color:#fff}
.btn--primary:hover{background:#222}
.btn--secondary{background:var(--btn-secondary-bg);color:var(--btn-secondary-text);border:1px solid var(--btn-secondary-border)}
.btn--secondary:hover{background:#ebebeb}

.form-header{display:flex;align-items:center;justify-content:space-between}
.order-form,.orders-overview,.summary-output{
  background:var(--card);border:1px solid var(--border);border-radius:12px;
}

.deadline-display{color:var(--primary);font-weight:700;margin:6px 0 10px}
.deadline-warning{color:#b94a48;margin-bottom:10px}
.deadline-countdown{margin:4px 0 12px; color:var(--text); font-weight:600}
.deadline-progress{display:none;height:8px;background:#eee;border-radius:6px;overflow:hidden;margin:6px 0 6px}
.deadline-progress__bar{height:100%;width:0;background:var(--primary);transition:width .4s ease;border-radius:6px}

.table-wrap{overflow-x:auto}
.orders-table{width:100%;border-collapse:collapse}
.orders-table th,.orders-table td{padding:12px 10px;border-bottom:1px solid var(--border);vertical-align:top}
.orders-table thead th{background:#f1f1f1;color:var(--text);font-weight:700}
/* Kein Umbruch im Preis-Header */
.orders-table thead th:nth-child(5){white-space:nowrap}
/* Breitere Namensspalte und dezente Subtexte unter Artikel */
.orders-table th:nth-child(2), .orders-table td:nth-child(2){width:24%}
.orders-table th:nth-child(1), .orders-table td:nth-child(1){width:8ch}
.orders-table .subtext{color:var(--muted);font-size:.9em;margin-top:4px}
/* Action-Buttons nebeneinander */
.orders-table td.actions-cell .actions{display:flex;gap:4px;align-items:center;flex-wrap:nowrap}
.orders-table td.actions-cell{white-space:nowrap}
/* Zebra rows for readability (light mode) */
body:not([data-theme="dark"]) .orders-table tbody tr:nth-child(even){background:#fbfbfb}
/* Dark mode: dezente Zeilenabsetzung (geringer Kontrast) */
:root[data-theme="dark"] .orders-table tbody tr{background:transparent}
:root[data-theme="dark"] .orders-table tbody tr:nth-child(even){background:#151515}
:root[data-theme="dark"] .remote-table tbody tr{background:transparent}
:root[data-theme="dark"] .remote-table tbody tr:nth-child(even){background:#151515}
/* Etwas dunklere Tabellenköpfe im Dark Mode bleiben erhalten */
:root[data-theme="dark"] .orders-table thead th{background:#161616}
/* Feinere Trennlinien im Dark Mode */
:root[data-theme="dark"] .orders-table th, :root[data-theme="dark"] .orders-table td,
:root[data-theme="dark"] .remote-table th, :root[data-theme="dark"] .remote-table td{border-bottom-color:#242424}

.total{font-weight:700;margin:12px 0}

/* Price preview */
.price-preview{font-weight:700;margin:8px 0 12px;color:var(--text)}
/* Accent color for price preview */
.price-preview{color:var(--accent)}

.button-row{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}

/* Serverdaten-Bereich */
.remote-actions{display:flex;gap:10px;flex-wrap:wrap;margin:8px 0 6px}
.btn-grid{display:grid !important;gap:8px}
.btn-grid{grid-template-columns:repeat(2,minmax(0,1fr))}
.btn-grid:has(>*:nth-child(4)){grid-template-columns:repeat(4,minmax(0,1fr))}
.btn-grid:has(>*:nth-child(3)):not(:has(>*:nth-child(4))){grid-template-columns:repeat(3,minmax(0,1fr))}
.btn-grid > .btn{width:100%}
.remote-status{font-size:.95rem;color:var(--text);margin:4px 0 8px}
.remote-wrapper{
  margin-top:8px;overflow-x:auto;border:1px solid var(--border);
  border-radius:12px;padding:12px;background:#fff;
}
.orders-overview, .remote-wrapper, .summary-output{color:var(--text)}
.remote-table{width:100%;table-layout:auto}
.orders-table thead th,.orders-table td,.remote-table thead th,.remote-table td{color:var(--text)}
.col-nr{width:6ch;text-align:right}
.remote-total{font-weight:700;margin:12px 0 6px}
.remote-summary-tools{display:flex;gap:8px;flex-wrap:wrap;margin:10px 0}
.remote-summary-box{width:100%;min-height:160px;color:var(--text)}
/* Lokale Bestellübersicht (Textarea) */
#summary-text{width:100%;min-height:160px;color:var(--text)}

/* Event-Modus Badge */
.event-badge{display:inline-block;padding:2px 8px;border-radius:999px;background:#eee;color:#333;font-weight:700}
:root[data-theme="dark"] .event-badge{background:#2a2a2a;color:#eee}

/* Map preview (Admin) */
.map-preview{width:100%;height:180px;border:1px solid var(--border);border-radius:12px;overflow:hidden;background:#fff}
.map-preview iframe,.map-preview img{width:100%;height:100%;border:0;object-fit:cover}
/* Dark Mode: iframe-Karten invertieren für dunkel wirkenden Stil (Fallback, wenn keine Static Styles) */
:root[data-theme="dark"] .map-preview iframe{filter:invert(90%) hue-rotate(180deg) saturate(.6) brightness(.9) contrast(.85)}

/* Spinner */
.spinner{display:inline-block;width:14px;height:14px;border:2px solid rgba(0,0,0,.15);border-top-color:var(--primary);border-radius:50%;animation:spin .7s linear infinite;vertical-align:-2px;margin-right:6px}
@keyframes spin{to{transform:rotate(360deg)}}

/* Skeleton rows */
.skeleton-row td{padding:12px 10px}
.skeleton-box{display:block;width:100%;height:12px;background:#eee;border-radius:6px;overflow:hidden;position:relative}
.skeleton-box::after{content:"";position:absolute;inset:0;background:linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,.6) 50%, rgba(255,255,255,0) 100%);transform:translateX(-100%);animation:skeleton-shimmer 1.2s infinite}
@keyframes skeleton-shimmer{to{transform:translateX(100%)}}

/* Toast */
.toast{
  position:fixed;left:50%;bottom:18px;transform:translateX(-50%);
  background:#333;color:#fff;padding:10px 14px;border-radius:10px;
  box-shadow:0 10px 22px rgba(0,0,0,.18);z-index:1000
}

/* Footer */
.footer{max-width:1100px;margin:8px auto 32px;text-align:center;color:var(--muted)}
.footer a{color:inherit}

/* Progress bar for remote operations */
.remote-progress{display:none;height:8px;background:#eee;border-radius:6px;overflow:hidden;margin:6px 0 10px}
.remote-progress__bar{height:100%;width:0;background:var(--primary);transition:width .2s ease;border-radius:6px}
.remote-progress.remote-progress--running .remote-progress__bar{background:var(--primary)}
.remote-progress.remote-progress--success .remote-progress__bar{background:var(--primary-700)}
.remote-progress.remote-progress--error .remote-progress__bar{background:#b94a48}

/* Theme toggle button */
.theme-toggle{
  position:absolute;right:16px;top:8px;
  background:transparent !important;
  border:0 !important;
  box-shadow:none;
  color:var(--text);
  font-size:28px; /* grössere Sonne/Mond */
  width:44px;height:44px; padding:0;
  display:inline-flex; align-items:center; justify-content:center;
  border-radius:999px; /* unsichtbar, aber für Fokusring rund */
}
.theme-toggle:hover{opacity:.85;background:transparent}
.theme-toggle:focus-visible{outline:2px solid var(--primary); outline-offset:2px}
:root[data-theme="dark"] .theme-toggle{color:var(--text)}

/* Dark theme variables */
:root[data-theme="dark"]{
  --bg:#111;
  --card:#1a1a1a;
  --text:#eee;
  --muted:#aaa;
  --border:#2a2a2a;
  /* primary tones remain; optionally slightly brighter on hover handled by existing */
  /* Buttons (dark) */
  --btn-secondary-bg:#2f2f2f;
  --btn-secondary-text:#fff;
  --btn-secondary-border:#3a3a3a;
}

/* Dark theme component overrides */
:root[data-theme="dark"] .orders-table thead th{background:#161616}
:root[data-theme="dark"] input, :root[data-theme="dark"] select, :root[data-theme="dark"] textarea{background:#101010;color:var(--text);border-color:var(--border)}
:root[data-theme="dark"] .remote-wrapper{background:var(--card)}
:root[data-theme="dark"] .btn--secondary:hover{background:#3a3a3a}
:root[data-theme="dark"] .btn--primary{background:#2a2a2a;color:#fff}
:root[data-theme="dark"] .btn--primary:hover{background:#333}
:root[data-theme="dark"] .deadline-progress{background:#2a2a2a}
:root[data-theme="dark"] .skeleton-box{background:#222}

/* Ensure selects in the order form stack and align */
.order-form .field-group{display:flex;flex-direction:column;gap:6px;margin-bottom:12px}
.order-form select{display:block;width:100%}

/* Auswahl-Details unter Select (Zutaten) */
.selection-details{color:var(--muted);font-size:.95rem;margin-top:6px}

/* Theming by order type */
[data-order-type="pizza"]{--accent:#e06a2c}
[data-order-type="salad"]{--accent:#2f9e44}
[data-order-type="menu"]{--accent:#2563eb}

/* Order type choice tiles */
.order-type-choices{display:flex;gap:8px;flex-wrap:nowrap}
.order-type-choices .choice{display:inline-flex;align-items:center;justify-content:center;padding:10px 14px;border:2px solid var(--border);border-radius:12px;cursor:pointer;user-select:none;min-width:0;font-weight:600;background:#fff;flex:1 1 0;text-align:center}
.order-type-choices .choice input{position:absolute;opacity:0;pointer-events:none}
/* Active state: orange border for selected tile */
.order-type-choices .choice:has(input:checked){border-color:var(--primary) !important;background:rgba(224,106,44,.08)}

/* Dark mode adjustments for tiles */
:root[data-theme="dark"] .order-type-choices .choice{background:#111;border-color:#2a2a2a}

/* Modal */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.35);display:flex;align-items:center;justify-content:center;z-index:2000}
.modal__content{background:var(--card);border:1px solid var(--border);border-radius:12px;min-width:280px;max-width:92vw;padding:16px}
.modal__content{width:min(560px,92vw);overflow-wrap:anywhere}
.password-input-wrap{display:flex;gap:6px;align-items:center}
.password-input-wrap input{flex:1;background:#fff;color:#111}
:root[data-theme="dark"] .password-input-wrap input{background:#0f0f0f;color:#fff}
input::placeholder, textarea::placeholder{ color: var(--muted) }
:root[data-theme="dark"] input::placeholder,
:root[data-theme="dark"] textarea::placeholder{ color: #9a9a9a }
/* Select hat keinen echten Placeholder – wir markieren das per Klasse */
select.is-placeholder{ color: var(--muted) }
:root[data-theme="dark"] select.is-placeholder{ color: #9f9f9f }

/* Verhindert iOS/Touch-Autozoom: Eingabefelder im Modal >=16px */
@media (hover: none) and (pointer: coarse){
  .modal input, .modal select, .modal textarea{ font-size:16px }
}
@supports (-webkit-touch-callout: none){
  .modal input, .modal select, .modal textarea{ font-size:16px }
}

/* Responsive Fixes for small screens */
@media (max-width: 680px){
  .grid-2{grid-template-columns:1fr}
  .pixabay-toolbar{flex-direction:column;align-items:stretch}
  .pixabay-toolbar input, .pixabay-toolbar button{width:100%}
  .btn-grid{grid-template-columns:1fr !important}
}

/* Avatars + row animations */
.avatar{display:inline-flex;align-items:center;justify-content:center;width:26px;height:26px;border-radius:999px;background:var(--primary);color:#fff;font-weight:700;font-size:.85rem;margin-right:6px}
@keyframes fadeInUp{from{opacity:0;transform:translateY(4px)}to{opacity:1;transform:translateY(0)}}
@keyframes fadeOut{from{opacity:1}to{opacity:0}}
.row-add{animation:fadeInUp .25s ease both}
.row-remove{animation:fadeOut .18s ease both}
